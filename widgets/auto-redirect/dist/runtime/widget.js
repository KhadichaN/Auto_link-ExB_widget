/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-core/react"],(function(e,t){var r={},o={};return Object.defineProperty(o,"__esModule",{value:!0}),{setters:[function(e){r.AppMode=e.AppMode,r.LinkType=e.LinkType,r.React=e.React,r.SessionManager=e.SessionManager,r.getAppStore=e.getAppStore},function(e){Object.keys(e).forEach((function(t){o[t]=e[t]}))}],execute:function(){e((()=>{var e={154:(e,t,r)=>{"use strict";var o=r(972);var n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=o.useSyncExternalStore,i=o.useRef,u=o.useEffect,c=o.useMemo,l=o.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,o,s){var f=i(null);if(null===f.current){var p={hasValue:!1,value:null};f.current=p}else p=f.current;f=c((function(){function e(e){if(!u){if(u=!0,a=e,e=o(e),void 0!==s&&p.hasValue){var t=p.value;if(s(t,e))return i=t}return i=e}if(t=i,n(a,e))return t;var r=o(e);return void 0!==s&&s(t,r)?t:(a=e,i=r)}var a,i,u=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,r,o,s]);var d=a(e,f[0],f[1]);return u((function(){p.hasValue=!0,p.value=d}),[d]),l(d),d}},418:(e,t,r)=>{"use strict";e.exports=r(154)},244:e=>{"use strict";e.exports=r},972:e=>{"use strict";e.exports=o}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var a={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(a),n.d(a,{__set_webpack_public_path__:()=>h,default:()=>w});var e=n(244),t=n(972),r=n(418),o="default"in t?t.default:t,i=Symbol.for("react-redux-context"),u="undefined"!=typeof globalThis?globalThis:{};function c(){if(!o.createContext)return{};const e=u[i]??(u[i]=new Map);let t=e.get(o.createContext);return t||(t=o.createContext(null),e.set(o.createContext,t)),t}var l=c(),s=()=>{throw new Error("uSES not initialized!")};function f(e=l){return function(){return o.useContext(e)}}var p=f(),d=s,y=(e,t)=>e===t;function v(e=l){const t=e===l?p:f(e),r=(e,r={})=>{const{equalityFn:n=y,devModeChecks:a={}}="function"==typeof r?{equalityFn:r}:r;const{store:i,subscription:u,getServerState:c,stabilityCheck:l,identityFunctionCheck:s}=t(),f=(o.useRef(!0),o.useCallback({[e.name]:t=>e(t)}[e.name],[e,l,a.stabilityCheck])),p=d(u.addNestedSub,i.getState,c||i.getState,f,n);return o.useDebugValue(p),p};return Object.assign(r,{withTypes:()=>r}),r}var S=v();Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen"),Symbol.for("react.client.reference");var b=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),m="undefined"!=typeof navigator&&"ReactNative"===navigator.product;b||m?o.useLayoutEffect:o.useEffect;Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var g;function w(t){const r=S((e=>e.appRuntimeInfo.appMode));return e.React.useEffect((()=>{var o,n,a;if(r!==e.AppMode.Run)return;const i=e.SessionManager.getInstance().getMainSession(),u=null===(o=null==i?void 0:i.username)||void 0===o?void 0:o.trim().toLowerCase(),c=t.config.linkParam,l=(t.config.username||"").split(/[\s,]+/).map((e=>e.trim().toLowerCase())).filter(Boolean);if(u&&l.includes(u)&&(null==c?void 0:c.value)&&c.linkType===e.LinkType.Page){const t=new URL(window.location.href),r=(0,e.getAppStore)().getState().appConfig,o=c.value,i=null===(n=null==r?void 0:r.pages)||void 0===n?void 0:n[o],u=null===(a=null==i?void 0:i.label)||void 0===a?void 0:a.trim();if(!u)return;const l=t.searchParams.get("id"),s=t.searchParams.has("draft"),f=u.replace(/\s+/g,"-"),p=new URLSearchParams;l&&p.set("id",l),p.set("page",f),s&&p.set("draft","true");const d=`${t.origin}${t.pathname}?${p.toString()}`;console.log("\u{1f517} Final URL:",d)}}),[t.config,r]),null}function h(e){n.p=e}g=r.useSyncExternalStoreWithSelector,d=g,(e=>{0})(t.useSyncExternalStore)})(),a})())}}}));